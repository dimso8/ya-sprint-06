# Exc1

Нефункциональные требования и риски:
```
SLA  99.9% (8h 45m 36s)
RTO  45m
RPO  15m 
нагрузка распределена равномерно почасовым поясам
час простоя - 500 000 рублей
```
Исходя из требований доступности сервера и требований к времени восстановления и потери данных, а так же из убытков, которые несет компания при простое,
предлагаю использовать failover-стратегию Active-Active с георезервированием.

При этом в двух ЦОД будут развёрнуты независимые кластеры Kubernetes, чтобы снизить издержки,
связанные с использованием встроенного в Kubernetes механизма failover.

Балансировка нагрузки от пользователей выполняется на GSBL, который отправляет запросы на ближайший к клиенту ЦОД. В случае выхода одного из ЦОД из строя
GSBL направляет весь трафик в работающий ЦОД.

Для БД предлагаю использовать конфигурацию развёртывания PostgreSQL Patroni. С построением Active-Active кластера в двух ЦОД-ах с распределением нагрузки на HAProxy. На схеме helth check идёт до кластера Patroni, т.к. судя по документации, кластер сам определяет доступные узлы и направляет на них трафик.